{% extends 'base.html.twig' %}

{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" href="{{ asset('css/delete_entries.css') }}">
{% endblock %}

{% block title %}Historique des entrées supprimables{% endblock %}

{% block body %}
<div class="delete-entries-container">
  <h2 class="delete-entries-title">Historique des entrées supprimables</h2>

  <div class="delete-entries-wrapper">
    {# Devblogs #}
    <section class="delete-entries-section">
      <h3 class="delete-entries-section-title">Devblogs</h3>

      {% for entry in devblogs %}
        <div class="delete-entries-card">
          <div class="delete-entries-card-content">
            <div class="delete-entries-card-info">
              <strong class="delete-entries-card-title">{{ entry.title }}</strong>
              <span class="delete-entries-card-date">{{ entry.date|date('d/m/Y') }}</span>
            </div>
            <form method="post" action="{{ path('admin.entry.delete_item', { id: entry.id, type: 'devblog' }) }}" onsubmit="return confirm('Confirmer la suppression ?');">
              <input type="hidden" name="_token" value="{{ csrf_token('delete-entry-devblog-' ~ entry.id) }}">
              <button class="delete-entries-btn">Supprimer</button>
            </form>
          </div>
        </div>
      {% else %}
        <p class="delete-entries-empty">Aucun devblog disponible.</p>
      {% endfor %}

      <div class="delete-entries-pagination">
        {{ knp_pagination_render(devblogs) }}
      </div>
    </section>

    {# Changelogs #}
    <section class="delete-entries-section">
      <h3 class="delete-entries-section-title">Changelogs</h3>

      {% for entry in changelogs %}
        <div class="delete-entries-card">
          <div class="delete-entries-card-content">
            <div class="delete-entries-card-info">
              <strong class="delete-entries-card-title">Version {{ entry.version }}</strong>
              <span class="delete-entries-card-date">{{ entry.date|date('d/m/Y') }}</span>
            </div>
            <form method="post" action="{{ path('admin.entry.delete_item', { id: entry.id, type: 'changelog' }) }}" onsubmit="return confirm('Confirmer la suppression ?');">
              <input type="hidden" name="_token" value="{{ csrf_token('delete-entry-changelog-' ~ entry.id) }}">
              <button class="delete-entries-btn">Supprimer</button>
            </form>
          </div>
        </div>
      {% else %}
        <p class="delete-entries-empty">Aucun changelog disponible.</p>
      {% endfor %}

      <div class="delete-entries-pagination">
        {{ knp_pagination_render(changelogs) }}
      </div>
    </section>

    {# Annonces #}
    <section class="delete-entries-section">
      <h3 class="delete-entries-section-title">Annonces</h3>

      {% for entry in announcements %}
        <div class="delete-entries-card">
          <div class="delete-entries-card-content">
            <div class="delete-entries-card-info">
              <strong class="delete-entries-card-title">{{ entry.title }}</strong>
              <span class="delete-entries-card-date">{{ entry.createdAt|date('d/m/Y') }}</span>
            </div>
            <form method="post" action="{{ path('admin.entry.delete_item', { id: entry.id, type: 'announcement' }) }}" onsubmit="return confirm('Confirmer la suppression ?');">
              <input type="hidden" name="_token" value="{{ csrf_token('delete-entry-announcement-' ~ entry.id) }}">
              <button class="delete-entries-btn">Supprimer</button>
            </form>
          </div>
        </div>
      {% else %}
        <p class="delete-entries-empty">Aucune annonce disponible.</p>
      {% endfor %}

      <div class="delete-entries-pagination">
        {{ knp_pagination_render(announcements) }}
      </div>
    </section>
  </div>
</div>
{% endblock %}